import{r as n,b as r,j as e}from"./index-DH51pi5z.js";function I({title:t,titleId:a,...l},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const R=n.forwardRef(I);function P({title:t,titleId:a,...l},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const A=n.forwardRef(P);function W({title:t,titleId:a,...l},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const O=n.forwardRef(W);function F({title:t,titleId:a,...l},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},l),t?n.createElement("title",{id:a},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"}))}const Z=n.forwardRef(F);var V=n.createContext({color:"currentColor",size:"1em",weight:"regular",mirrored:!1}),z=function(a,l,o){var c=o.get(a);return c?c(l):(console.error('Unsupported icon weight. Choose from "thin", "light", "regular", "bold", "fill", or "duotone".'),null)};function L(t,a){if(t==null)return{};var l={},o=Object.keys(t),c,i;for(i=0;i<o.length;i++)c=o[i],!(a.indexOf(c)>=0)&&(l[c]=t[c]);return l}var C=n.forwardRef(function(t,a){var l=t.alt,o=t.color,c=t.size,i=t.weight,g=t.mirrored,v=t.children,b=t.renderPath,w=L(t,["alt","color","size","weight","mirrored","children","renderPath"]),d=n.useContext(V),h=d.color,f=h===void 0?"currentColor":h,p=d.size,j=d.weight,N=j===void 0?"regular":j,k=d.mirrored,s=k===void 0?!1:k,m=L(d,["color","size","weight","mirrored"]);return r.createElement("svg",Object.assign({ref:a,xmlns:"http://www.w3.org/2000/svg",width:c??p,height:c??p,fill:o??f,viewBox:"0 0 256 256",transform:g||s?"scale(-1, 1)":void 0},m,w),!!l&&r.createElement("title",null,l),v,r.createElement("rect",{width:"256",height:"256",fill:"none"}),b(i??N,o??f))});C.displayName="IconBase";var u=new Map;u.set("bold",function(t){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"100",cy:"116",r:"16"}),r.createElement("circle",{cx:"156",cy:"116",r:"16"}),r.createElement("path",{d:"M216,216l-29.3-24-29.4,24L128,192,98.7,216,69.3,192,40,216V120a88,88,0,0,1,176,0Z",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))});u.set("duotone",function(t){return r.createElement(r.Fragment,null,r.createElement("path",{d:"M216,216l-29.3-24-29.4,24L128,192,98.7,216,69.3,192,40,216V120a88,88,0,0,1,176,0Z",opacity:"0.2"}),r.createElement("circle",{cx:"100",cy:"116",r:"12"}),r.createElement("circle",{cx:"156",cy:"116",r:"12"}),r.createElement("path",{d:"M216,216l-29.3-24-29.4,24L128,192,98.7,216,69.3,192,40,216V120a88,88,0,0,1,176,0Z",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))});u.set("fill",function(){return r.createElement(r.Fragment,null,r.createElement("path",{d:"M128,24a96.2,96.2,0,0,0-96,96v96a8.1,8.1,0,0,0,13.1,6.2l24.2-19.9,24.3,19.9a8,8,0,0,0,10.1,0L128,202.3l24.3,19.9a8,8,0,0,0,10.1,0l24.3-19.9,24.2,19.9a7.9,7.9,0,0,0,8.5,1A7.9,7.9,0,0,0,224,216V120A96.2,96.2,0,0,0,128,24ZM100,128a12,12,0,1,1,12-12A12,12,0,0,1,100,128Zm56,0a12,12,0,1,1,12-12A12,12,0,0,1,156,128Z"}))});u.set("light",function(t){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"100",cy:"116",r:"10"}),r.createElement("circle",{cx:"156",cy:"116",r:"10"}),r.createElement("path",{d:"M216,216l-29.3-24-29.4,24L128,192,98.7,216,69.3,192,40,216V120a88,88,0,0,1,176,0Z",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))});u.set("thin",function(t){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"100",cy:"116",r:"8"}),r.createElement("circle",{cx:"156",cy:"116",r:"8"}),r.createElement("path",{d:"M216,216l-29.3-24-29.4,24L128,192,98.7,216,69.3,192,40,216V120a88,88,0,0,1,176,0Z",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))});u.set("regular",function(t){return r.createElement(r.Fragment,null,r.createElement("circle",{cx:"100",cy:"116",r:"12"}),r.createElement("circle",{cx:"156",cy:"116",r:"12"}),r.createElement("path",{d:"M216,216l-29.3-24-29.4,24L128,192,98.7,216,69.3,192,40,216V120a88,88,0,0,1,176,0Z",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))});var B=function(a,l){return z(a,l,u)},_=n.forwardRef(function(t,a){return r.createElement(C,Object.assign({ref:a},t,{renderPath:B}))});_.displayName="Ghost";function $(){const t=n.useMemo(()=>new Date().toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),[]),[a,l]=n.useState(""),[o,c]=n.useState(1),[i,g]=n.useState("一般"),[v,b]=n.useState(!1),[w,d]=n.useState(null),[h,f]=n.useState(null),[p,j]=n.useState(!1);n.useEffect(()=>{const s=()=>{const x=localStorage.getItem("system_paused")==="true";j(x)};s();const m=setInterval(s,1e3);return()=>clearInterval(m)},[]);function N(){const s=new Date().toISOString().split("T")[0];localStorage.getItem("obake_last_reset_date")!==s&&(localStorage.setItem("obake_last_reset_date",s),localStorage.setItem("ticket_counter","0"),localStorage.setItem("current_number","1"))}async function k(s){s.preventDefault(),b(!0),d(null);try{await new Promise(M=>setTimeout(M,1e3)),N();const x=parseInt(localStorage.getItem("ticket_counter")||"0")+1;localStorage.setItem("ticket_counter",x.toString()),f(x.toString());const y={id:x.toString(),email:a,count:o,age:i,status:"未呼出",createdAt:new Date().getTime(),ticketNo:x.toString()},E=JSON.parse(localStorage.getItem("admin_tickets")||"[]");E.push(y),localStorage.setItem("admin_tickets",JSON.stringify(E));const S=JSON.parse(localStorage.getItem("obake_tickets_v1")||"[]");S.unshift(y),localStorage.setItem("obake_tickets_v1",JSON.stringify(S)),window.dispatchEvent(new CustomEvent("ticketAdded",{detail:y}))}catch(m){d(m?.message??"発行に失敗しました")}finally{b(!1)}}return h?e.jsx("div",{className:"min-h-screen bg-[#fff6ef] flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-white/80 backdrop-blur rounded-2xl p-8 shadow-lg text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-2xl mb-4",children:"✓"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"整理券発行完了"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"整理券が正常に発行されました！"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-sm text-slate-500 mb-2",children:"あなたの整理券番号"}),e.jsx("div",{className:"text-5xl font-bold text-violet-600",children:h})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-amber-700 mb-6",children:[e.jsx("div",{className:"font-bold mb-2",children:"ご案内"}),e.jsx("div",{className:"text-sm",children:"番号が呼ばれましたら、受付にお越しください。"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-red-700 mb-6",children:[e.jsx("div",{className:"font-bold mb-2 text-center",children:"重要"}),e.jsx("div",{className:"text-sm text-center",children:"この画面は受付で使用するため、スクリーンショットをお願いいたします。"})]}),e.jsx("button",{onClick:()=>{f(null),l(""),c(1),g("一般")},className:"w-full bg-violet-600 hover:bg-violet-700 text-white py-3 rounded-xl font-medium transition-colors",children:"新しく予約する"})]})}):e.jsxs("div",{className:"min-h-screen bg-[#fff6ef]",children:[e.jsx("header",{className:"sticky top-0 z-10 bg-white/70 backdrop-blur border-b",children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 h-14 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-lg bg-violet-600",children:e.jsx(_,{className:"h-6 w-6 text-white"})}),e.jsx("span",{className:"font-bold",children:"お化け屋敷 整理券システム"})]}),e.jsx("nav",{className:"text-sm text-slate-600 flex items-center gap-6",children:e.jsx("a",{className:"font-semibold text-slate-900",href:"/reservation",children:"予約フォーム"})})]})}),p&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:e.jsx("div",{className:"mx-auto max-w-6xl px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded-full"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-700 font-medium",children:"現在点検中のため一時休止中です。しばらくお待ちください。"})})]})})}),e.jsx("main",{className:"mx-auto max-w-3xl px-4 py-10",children:e.jsxs("form",{onSubmit:k,className:"mx-auto max-w-xl bg-white rounded-2xl shadow p-6 space-y-6",children:[e.jsxs("div",{className:"pb-3 border-b",children:[e.jsx("div",{className:"text-2xl font-bold text-center",children:"お化け屋敷整理券フォーム"}),e.jsxs("div",{className:"mt-2 text-center text-slate-500 flex items-center justify-center gap-3 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4"})," ",t.split(" ")[0]]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-4 h-4"})," ",t.split(" ")[1]]})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-slate-600 text-sm",children:"メールアドレス"}),e.jsx("input",{required:!0,type:"email",value:a,onChange:s=>l(s.target.value),placeholder:"example@email.com",className:"mt-1 w-full rounded-lg border px-3 h-11"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-slate-600 text-sm",children:"人数"}),e.jsx("select",{className:"mt-1 w-full rounded-lg border h-11 px-3",value:o,onChange:s=>c(Number(s.target.value)),children:[1,2,3,4,5,6,7,8].map(s=>e.jsxs("option",{value:s,children:[s,"名"]},s))})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-slate-600 text-sm",children:"年齢層"}),e.jsx("select",{className:"mt-1 w-full rounded-lg border h-11 px-3",value:i,onChange:s=>g(s.target.value),children:["一般","大学生","高校生以下"].map(s=>e.jsx("option",{value:s,children:s},s))})]}),w&&e.jsx("p",{className:"text-red-600 text-sm",children:w}),e.jsx("button",{disabled:v,className:"w-full h-12 rounded-xl font-bold text-white bg-gradient-to-r from-rose-500 to-violet-600 disabled:opacity-50",children:v?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(R,{className:"w-5 h-5 animate-spin"}),"発行中..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),"整理券を発行する"]})})]})})]})}export{$ as R};
