import{c as g,j as e,r as c,A as f}from"./api.config-DsnaoXnZ.js";const x=f.baseURL.replace(/\/api$/,"");function p(){const[t,h]=c.useState(""),[a,b]=c.useState(0),[l,N]=c.useState(0);return c.useEffect(()=>{const i=new URLSearchParams(window.location.search).get("ticket")||"";console.log("URL params:",window.location.search),console.log("Ticket from URL:",i),h(i);const d=async()=>{try{console.log("APIå‘¼ã³å‡ºã—é–‹å§‹...");const n=new Date().toISOString().split("T")[0],m=Date.now(),s=await fetch(`${x}/api/reservations/status?date=${n}&v=${m}`,{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors",credentials:"omit",cache:"no-store"});if(console.log("Status response:",s.status),s.ok){const o=await s.json();console.log("Status data:",o),b(o.data?.currentNumber||1)}else console.error("Status API error:",s.status,s.statusText);const r=await fetch(`${x}/api/reservations/counter?date=${n}&v=${m}`,{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors",credentials:"omit",cache:"no-store"});if(console.log("Counter response:",r.status),r.ok){const o=await r.json();console.log("Counter data:",o),N(o.data?.counter||1)}else console.error("Counter API error:",r.status,r.statusText);console.log("APIå‘¼ã³å‡ºã—å®Œäº†")}catch(n){console.error("ç¾åœ¨ã®ç•ªå·å–å¾—ã‚¨ãƒ©ãƒ¼:",n)}};d();const j=setInterval(d,3e3);return()=>clearInterval(j)},[]),e.jsx("div",{className:"min-h-screen bg-[#fff6ef] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center text-3xl mb-6",children:"âœ“"}),e.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900",children:"æ•´ç†åˆ¸ç™ºè¡Œå®Œäº†"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"æ•´ç†åˆ¸ãŒæ­£å¸¸ã«ç™ºè¡Œã•ã‚Œã¾ã—ãŸï¼"}),e.jsxs("div",{className:"mb-6",children:[t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"ã‚ãªãŸã®æ•´ç†åˆ¸ç•ªå·"}),e.jsxs("div",{className:"text-5xl font-bold text-violet-600 mb-4",children:["#",t]})]}),e.jsxs("div",{className:"bg-yellow-100 border border-yellow-300 rounded p-2 mb-4",children:[e.jsx("div",{className:"text-sm text-yellow-800 font-bold",children:"ğŸ”§ ãƒ‡ãƒãƒƒã‚°æƒ…å ±"}),e.jsxs("div",{className:"text-xs text-yellow-700",children:["ticketNo: ",t||"ãªã—"," | currentNumber: ",a," | currentTicketNumber: ",l]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"ç¾åœ¨ã®æ•´ç†åˆ¸ç•ªå·"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["#",l]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"ç¾åœ¨ã®å‘¼ã³å‡ºã—ç•ªå·"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:["#",a]})]})]}),t&&Number(t)-a>0&&e.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:["ã‚ã¨ç´„ ",e.jsx("span",{className:"font-bold text-violet-600",children:Number(t)-a})," çµ„ãŠå¾…ã¡ãã ã•ã„"]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-blue-700 text-sm font-medium",children:[e.jsx("span",{className:"font-bold",children:"ã”æ¡ˆå†…ï¼š"}),"40çµ„å‰ã«ãªã£ãŸã‚‰å—ä»˜ä¼šå ´ã«ãŠè¶Šã—ãã ã•ã„"]})}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{className:"text-red-700 text-sm font-medium",children:"ã“ã®ç”»é¢ã¯å—ä»˜ã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚"})}),e.jsx("button",{onClick:()=>window.location.href="/reservation.html",className:"w-full bg-violet-600 hover:bg-violet-700 text-white py-3 rounded-xl font-medium transition-colors",children:"æ–°ã—ãæ•´ç†åˆ¸ã‚’ç™ºè¡Œã™ã‚‹"})]})})}const u=document.getElementById("reservation-root");u&&g.createRoot(u).render(e.jsx(p,{}));
